# 使用DownloadManager下载更新APP
---
#### 1. 需求

        版本升级,每个App都会使用的功能

#### 2. 实现思路

    2.1 请求数据获取服务器最新的版本号、下载地址、是否强制升级、下载文件的MD5值（还有一种分区域或者用户升级，传给服务器一个地区标识或者用户，服务根据客户端的参数进行判断是都需要升级，避免大规模同时升级）

    2.2 与本地APP版本号比对是否需要升级（强制升级直接步骤3）

    2.3 记录最新的版本号以及下载地址等信息，用于用户忽略下载下次比对使用

    2.4 显示升级提示框，展示升级内容、文件大小（还有一种做法直接在WIFI的情况下悄悄下载，下载好了再显示对话框，这样用户点击升级就不用等待下载时间）

    2.5 启动下载服务（需要做兼容6.0动态权限申请）

    2.6 下载完成自动安装（兼容7.0私有目录被限制访问，8.0允许安装未知来源权限


